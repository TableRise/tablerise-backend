{"openapi":"3.0.3","info":{"title":"TableRise - users","contact":{"email":"tablerise@outlook.com","name":"tablerise"},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"},"version":"3.0.0"},"servers":[{"url":"http://localhost:3001/"}],"tags":[{"name":"external"},{"name":"register"},{"name":"authentication"},{"name":"users"},{"name":"management"}],"paths":{"/oauth/google":{"get":{"tags":["external"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"description":"Route to login with google"}},"/oauth/discord":{"get":{"tags":["external"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"description":"Route to login with discord"}},"/oauth/{id}/complete":{"put":{"tags":["register"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"description":"Route to confirm external registration","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"nickname":{"type":"string","example":"Brain_DAmore"},"firstName":{"type":"string","example":"Elsie"},"lastName":{"type":"string","example":"Parisian"},"pronoun":{"type":"string","example":"she/her"},"birthday":{"type":"string","example":"1994-09-18T00:28:28.796Z"}}}}}}}},"/users/verify":{"get":{"tags":["authentication"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string"}},{"name":"flow","in":"query","required":true,"schema":{"type":"string"}}],"description":"This route receives an userId and send an email to verify the user.\n\nThe user status is changed and is necessary to confirm the email using the code sent in the email message to perform any further operations."}},"/users/all":{"get":{"tags":["users"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"description":"This route returns all users registered in database"}},"/users/logout":{"get":{"tags":["authentication"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"description":"Route for logout of an user and addition of token in a forbidden list"}},"/users/{id}":{"get":{"tags":["users"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"description":"Route to recovery of one user"}},"/users/register":{"post":{"tags":["register"],"responses":{"201":{"description":"Created"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"description":"Route for user registration, after register email confirmation is needed.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","example":"Mollie10@yahoo.com"},"password":{"type":"string","example":"TheWorld@122"},"nickname":{"type":"string","example":"Brain_DAmore"}}}}}}}},"/users/login":{"post":{"tags":["authentication"],"responses":{"201":{"description":"Created"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"description":"Route for user login","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","example":"Mollie10@yahoo.com"},"password":{"type":"string","example":"TheWorld@122"}}}}}}}},"/users/{id}/update/picture":{"post":{"tags":["management"],"responses":{"201":{"description":"Created"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"consumes":["multipart/form-data"],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"description":"Route used to upload a photo as profile ficture - Only PNG or JPEG","requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"picture":{"type":"string","example":{"isBinary":true},"format":"binary"}}}}}}}},"/users/{id}/update":{"put":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"description":"Route for update user but only allowed fields.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"nickname":{"type":"string","example":"Brain_DAmore"},"details":{"type":"object","example":{"firstName":"Elsie","lastName":"Parisian","pronoun":"she/her","birthday":"1994-09-18T00:28:28.796Z","biography":"potential devotee, student ðŸ¦¥"}}}}}}}}},"/users/authenticate/email":{"patch":{"tags":["authentication"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string"}},{"name":"code","in":"query","required":true,"schema":{"type":"string"}},{"name":"flow","in":"query","required":true,"schema":{"type":"string"}}],"description":"Route to verify email code sent to user"}},"/users/authenticate/2fa":{"patch":{"tags":["authentication"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string"}},{"name":"token","in":"query","required":true,"schema":{"type":"string"}},{"name":"flow","in":"query","required":true,"schema":{"type":"string"}}],"description":"Route to verify user two factor authentication"}},"/users/authenticate/secret-question":{"patch":{"tags":["authentication"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string"}},{"name":"flow","in":"query","required":true,"schema":{"type":"string"}}],"description":"Route to verify user secret question authentication","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"question":{"type":"string","example":"what-is-your-grandfather-last-name"},"answer":{"type":"string","example":"Silvera"}}}}}}}},"/users/{id}/question/activate":{"patch":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"description":"Activate the secretQuestion - 2FA will be disabled","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"question":{"type":"string","example":"what-is-your-grandfather-last-name"},"answer":{"type":"string","example":"Silvera"}}}}}}}},"/users/{id}/question/update":{"patch":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"description":" Route for update user Secret Question.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"question":{"type":"string","example":"what-color-do-you-like-the-most"},"answer":{"type":"string","example":"black"},"new":{"type":"object","example":{"question":"what-is-your-grandfather-last-name","answer":"Silvera"}}}}}}}}},"/users/{id}/2fa/activate":{"patch":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"description":"Route for 2FA activation"}},"/users/{id}/2fa/reset":{"patch":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"description":"Route for 2FA reset"}},"/users/{id}/update/email":{"patch":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"description":"Route for email update, verification code send to user email is needed.\n\nIf the user has 2FA enabled the 2FA token will be needed as well.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","example":"Mollie10@yahoo.com"}}}}}}}},"/users/update/password":{"patch":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"email","in":"query","required":true,"schema":{"type":"string"}}],"description":"Route to perform the password reset operation, receives an email code and 2FA or secret question if enabled.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"password":{"type":"string","example":"@TheWorld456"}}}}}}}},"/users/{id}/update/game-info":{"patch":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}},{"name":"infoId","in":"query","required":true,"schema":{"type":"string"}},{"name":"targetInfo","in":"query","required":true,"schema":{"type":"string"}},{"name":"operation","in":"query","required":true,"schema":{"type":"string"}}],"description":"Route to update user game info.\n\n------------------------\nParams:\n- userId: expects an user id.\n\nQuery:\n- id: content id to add or remove\n- info: \"badges\" | \"campaigns\" | \"characters\"\n- operation: \"add\" | \"remove\""}},"/users/{id}/reset":{"patch":{"tags":["management"],"responses":{"200":{"description":"OK"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"description":"Route for user reset, this route erase all the content in: characters - campaigns - badges"}},"/users/{id}/delete":{"delete":{"tags":["management"],"responses":{"204":{"description":"No content"},"400":{"description":"Bad Request"},"401":{"description":"Unauthorized"},"403":{"description":"Forbidden"},"404":{"description":"Not Found"},"422":{"description":"Unprocessable Entity"},"500":{"description":"Internal"}},"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string"}}],"description":"Route for user deletion, if the user has 2FA enabled the 2FA token will be needed, if not the secret question will be needed."}}},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}